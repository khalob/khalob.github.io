!function t(a,e,i){function n(r,o){if(!e[r]){if(!a[r]){var d="function"==typeof require&&require;if(!o&&d)return d(r,!0);if(s)return s(r,!0);var l=new Error("Cannot find module '"+r+"'");throw l.code="MODULE_NOT_FOUND",l}var f=e[r]={exports:{}};a[r][0].call(f.exports,(function(t){return n(a[r][1][t]||t)}),f,f.exports,t,a,e,i)}return e[r].exports}for(var s="function"==typeof require&&require,r=0;r<i.length;r++)n(i[r]);return n}({1:[function(t,a,e){"use strict";var i=t("./login"),n=t("./search");function s(t,a){if(t){$(".list-wrapper").empty();var e="",i="",s="",r="",o="";for(var d in t){for(var l in i='<span class="item-name">'+d+"</span>",s='<span class="quantity">'+t[d].quantity+"</span>",o=t[d].synonyms?t[d].synonyms.replaceAll(", "," "):"",r="",a){a[l][d]&&(r+=`<span class="list-item-tag" data-value="${l}">${l}</span>`)}e+=`<div class="list-item" data-enabled="${t[d].enabled}" data-name="${d}" >\n\t\t\t \t\t\t\t\t<label class="toggle-item"></label>\n\t\t\t\t\t\t\t\t<div class="item-details">\n\t\t\t\t\t\t\t\t\t${i}\n\t\t\t\t\t\t\t\t\t${s}\n\t\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t\t<div class="list-item-tags">\n\t\t\t\t\t\t\t\t\t${r}\n\t\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t\t<div class="list-item-synonyms">\n\t\t\t\t\t\t\t\t\t${o}\n\t\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t\t<button type="button" class="remove-item" data-toggle="modal" data-target="#confirmation-modal">×</button>\n\t\t\t\t\t\t\t</div>`}$(".list-wrapper").html(e),n.filterResults()}}function r(t){if(t){$(".appendable-tags").empty();var a="";for(var e in t)a+=`<span class="append-tag" data-value="${e}">${e}</span>`;$(".appendable-tags").html(a)}}function o(t,a){var e=$("#item-tags-input").val();t?e=t:e&&(e=e.trim()),e&&0===$('.item-tags span[data-value="'+e+'"]').length&&($(".item-tags").append('<span class="tag" data-value="'+e+'">'+e+'<span class="tag-remove">×</span></span>'),$("#item-tags-input").val(""),a&&$("#item-tags-input").focus())}i.init(),n.init(),$("body").on("user-sign-in",(function(){var t=!0;firebase.database().ref("/tags").on("value",(function(a){if(!t){var e=a.val();n.generateTagFilterHTML(e),r(e),firebase.database().ref("/lists/grocery").once("value",(function(t){s(t.val(),e)}))}t=!1})),firebase.database().ref("/lists/grocery").on("value",(function(t){var a=t.val();firebase.database().ref("/tags").once("value",(function(t){var e=t.val();n.generateTagFilterHTML(e),r(e),s(a,e)}))}))})),$("body").on("click",".show-add-form",(function(t){t.preventDefault(),$("#add-item-modal").find('.modal-title, button[type="submit"]').text("Add Item"),$("form#add-item #item-name").removeAttr("data-editname"),$("form#add-item .item-tags").removeAttr("data-edittags"),$("form#add-item .appendable-tags .append-tag").show(),$("form#add-item #df").parent().show(),$("form#add-item").trigger("reset"),$("#add-item-modal").modal("show")})),$("body").on("submit","form#add-item",(function(t){var a=$(this).find("#item-name").attr("data-editname"),e=i.parseUserData($(this).find("#item-name").val());if($("#df").is(":checked")&&(e+=" (DF)"),a&&a!==e){firebase.database().ref("/lists/grocery/"+a).set(null),firebase.database().ref("/foods/"+a).set(null);var n=$("form#add-item .item-tags").attr("data-edittags"),s=n?n.split(","):[];for(var r in s){var o=s[r];firebase.database().ref("/tags/"+o+"/"+a).set(null)}}var d,l=[];$(".item-tags .tag").each((function(){d=""+$(this).data("value"),l.push(d),firebase.database().ref("/tags/"+d+"/"+e).set(!0)})),firebase.database().ref("/lists/grocery/"+e).set({quantity:$(this).find("#quantity").val(),synonyms:i.parseSynonyms($(this).find("#synonyms").val()),enabled:"true"}),firebase.database().ref("/foods/"+e).set({brand:i.parseUserData($(this).find("#brand").val()),tags:l}),$("#add-item-modal").modal("hide"),t.preventDefault()})),$("body").on("keypress","form#add-item",(function(t){if(13==t.which&&$(t.target).is("#item-tags-input"))return o(null,!0),!1})),$("body").on("click",".remove-item-confirm",(function(t){t.stopPropagation();var a=$(this).data("item-name");firebase.database().ref("/lists/grocery/"+a).set(null),firebase.database().ref("/foods/"+a).set(null),firebase.database().ref("/tags").once("value",(function(t){var e=t.val();for(var i in e)firebase.database().ref("/tags/"+i+"/"+a).set(null)})),$("#confirmation-modal").modal("hide")})),$("body").on("click",".toggle-item",(function(t){t.stopPropagation();var a=$(this).parent(),e=a.data("name"),i=a.data("enabled");firebase.database().ref("/lists/grocery/"+e).update({"/enabled":(!i).toString()})})),$("body").on("click",".list-item",(function(t){if($(t.target).is(".list-item, .item-details, .item-name, .quantity")){var a=$(this).data("name"),e=$(this).find(".quantity").text();firebase.database().ref("/foods/"+a).once("value",(function(t){$("form#add-item").trigger("reset"),function(t,a,e){var i=a.endsWith(" (DF)");a=a.replace(" (DF)",""),$("#add-item-modal .modal-title").text("Edit "+a),$('#add-item-modal button[type="submit"]').text("Apply Edits");var n=$("form#add-item");for(var s in n.find("#item-name").val(a),n.find("#item-name").attr("data-editname",a),n.find("#brand").val(t.brand?t.brand:""),n.find("#synonyms").val(t.synonyms?t.synonyms:""),n.find("#quantity").val(e),n.find(".item-tags").attr("data-edittags",t.tags),n.find("#df").parent().hide(),t.tags){var r=t.tags[s];r&&0===n.find('.item-tags span[data-value="'+r+'"]').length&&n.find(".item-tags").append('<span class="tag" data-value="'+r+'">'+r+'<span class="tag-remove">×</span></span>'),$('.appendable-tags .append-tag[data-value="'+r+'"]').hide()}n.find("#df").val(i)}(t.val(),a,e),$("#add-item-modal").modal("show")}))}})),$(".add-tag-btn").on("click",(function(){o(null,!0)})),$("body").on("click",".tag-remove",(function(){var t=$(this).parent().data("value");$(`.append-tag[data-value="${t}"]`).show(),$(this).parent().remove()})),$("body").on("click",".append-tag",(function(){o($(this).data("value"),!1),$(this).hide()})),$("body").on("reset","form#add-item",(function(){$(".item-tags").html("")})),$("body").on("show.bs.modal","#confirmation-modal",(function(t){var a=$(t.relatedTarget).parent().data("name"),e=$(this);e.find(".modal-body p").text("Are you sure you want to remove "+a+" from the list?"),e.find(".btn-primary").data("item-name",a)}))},{"./login":2,"./search":3}],2:[function(t,a,e){"use strict";var i={showAccount:function(t){$("#sign-in").hide(),$(".account-image").attr("src",t.photoURL),$(".account-name").text(t.displayName),$(".account-email").text(t.email),$("#account-info").show(),$("body").addClass("logged-in")},parseUserData:function(t){var a=(t&&t.toString?t.toString():"").replace(/(^\w{1})|(\s{1}\w{1})/g,t=>t.toUpperCase());return a.trim?a.trim():a},parseSynonyms:function(t){return t.split(",").map((function(t){return i.parseUserData(t)})).join(", ")},init:function(){firebase.auth().onAuthStateChanged((function(t){t?(i.showAccount(t.providerData[0]),$("body").trigger("user-sign-in")):($("#account-info").hide(),$("#sign-in").show(),$("body").trigger("user-sign-out"))})),$("body").on("click","#sign-out",(function(){firebase.auth().signOut()})),$("body").on("click","#sign-in",(function(){var t=new firebase.auth.GoogleAuthProvider;firebase.auth().signInWithPopup(t).catch((function(t){var a=t.message;alert(a)}))}))}};a.exports=i},{}],3:[function(t,a,e){"use strict";function i(){var t=$(".search-field").val(),a=$(".tag-filters .tag-filter.active"),e=$(".list-item");t&&""!==t&&(e=e.filter(":icontains("+t+")")),a.each((function(){var t=$(this).data("value");e=e.filter((function(){return $(this).find(`.list-item-tag[data-value="${t}"]`).length>0}))})),$(".list-item").hide(),e.show()}var n={init:function(){$("body").on("click",".tag-filter",(function(){$(this).toggleClass("active"),i()})),$(".clear-all-filters").on("click",(function(){$(".tag-filters .tag-filter.active").removeClass("active"),$(".search-field").val(""),$(".list-item").show()})),$(".tag-filter-toggle").on("click",(function(){$(".tag-filters").slideToggle(),$(this).toggleClass("open")})),$(".search-field").on("input",(function(){i()})),$(".search-field").on("keydown",(function(t){13===(t.keyCode||t.which)&&$(".search-field").blur()}))},filterResults:i,generateTagFilterHTML:function(t){var a=[];if($(".tag-filters .tag-filter.active").each((function(){a.push($(this).data("value"))})),t){$(".tag-filters").empty();var e="";for(var i in t)e+=`<span class="tag-filter${a.includes(i)?" active":""}" data-value="${i}">${i}</span>`;$(".tag-filters").html(e)}}};a.exports=n},{}]},{},[1]);