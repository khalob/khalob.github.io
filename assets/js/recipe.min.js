!function t(e,i,a){function n(s,o){if(!i[s]){if(!e[s]){var c="function"==typeof require&&require;if(!o&&c)return c(s,!0);if(r)return r(s,!0);var l=new Error("Cannot find module '"+s+"'");throw l.code="MODULE_NOT_FOUND",l}var u=i[s]={exports:{}};e[s][0].call(u.exports,(function(t){return n(e[s][1][t]||t)}),u,u.exports,t,e,i,a)}return i[s].exports}for(var r="function"==typeof require&&require,s=0;s<a.length;s++)n(a[s]);return n}({1:[function(t,e,i){"use strict";var a={showAccount:function(t){$("#sign-in").hide(),$(".account-image").attr("src",t.photoURL),$(".account-name").text(t.displayName),$(".account-email").text(t.email),$("#account-info").show(),$("body").addClass("logged-in")},parseUserData:function(t){var e=(t&&t.toString?t.toString():"").replace(/(^\w{1})|(\s{1}\w{1})/g,t=>t.toUpperCase());return e.trim?e.trim():e},parseSynonyms:function(t){return t.split(",").map((function(t){return a.parseUserData(t)})).join(", ")},init:function(){firebase.auth().onAuthStateChanged((function(t){t?(a.showAccount(t.providerData[0]),$("body").trigger("user-sign-in")):($("#account-info").hide(),$("#sign-in").show(),$("body").trigger("user-sign-out"))})),$("body").on("click","#sign-out",(function(){firebase.auth().signOut()})),$("body").on("click","#sign-in",(function(){var t=new firebase.auth.GoogleAuthProvider;firebase.auth().signInWithPopup(t).catch((function(t){var e=t.message;alert(e)}))}))}};e.exports=a},{}],2:[function(t,e,i){"use strict";var a=t("./login"),n=t("./search");function r(t){var e=t.split(" "),i=/[1-9][0-9]*\/[1-9][0-9]*/g;return e.map((function(t){return i.test(t)?t.replace("/","&frasl;"):t})).join(" ")}function s(t,e){var i=t;return e.forEach((function(t){var e=new RegExp("("+t+")","ig");i=i.replace(e,"<b>$1</b>")})),i}a.init(),n.init(),$("body").on("user-sign-in",(function(){firebase.database().ref("/recipeTags").on("value",(function(t){var e=t.val();n.generateTagFilterHTML(e),firebase.database().ref("/recipes").on("value",(function(t){!function(t,e){if(t){$(".list-wrapper").empty();var i="",a="",r="";for(var s in t){for(var o in a='<span class="item-name">'+s+"</span>",r="",e){e[o][s]&&(r+=`<span class="list-item-tag" data-value="${o}">${o}</span>`)}i+=`<div class="list-item" data-name="${s}" data-value='${JSON.stringify(t[s])}'>\n\t\t\t\t\t\t\t\t<div class="item-details">\n\t\t\t\t\t\t\t\t\t${a}\n\t\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t\t<div class="list-item-tags">\n\t\t\t\t\t\t\t\t\t${r}\n\t\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t</div>`}$(".list-wrapper").html(i),n.filterResults()}}(t.val(),e)}))}))})),$("body").on("click",".list-item",(function(){var t=$(this).data("name");!function(t,e){var i,a,n,o=$("#recipe-modal .modal-title"),c=$("#recipe-modal .modal-body"),l="",u="",d=[];for(var f in t.ingredients)d.push(f),l+=`<li class="${(n=t.ingredients[f]).isBasic?"basic":""} ingredient" data-value="${f}" \n\t\t\t\t\t\t\t\tdata-quantity="${n.quantity}" data-addToList="${!n.isBasic}">\n\t\t\t\t\t\t\t\t${r(n.quantity)+" "+f}\n\t\t\t\t\t\t\t</li>`;for(var g in t.steps)u+=`<div class="step-block">\n\t\t\t\t\t${(a=t.steps[g]).image?`<img class="step-image" src="${a.image}"/>`:`<div class="empty-step-image">${parseInt(g)+1}</div>`}\n\t\t\t\t\t<h3>${parseInt(g)+1}. ${a.title}</h3>\n\t\t\t\t\t<p>${s(r(a.text),d)}</p>\n\t\t\t\t</div>`;i=`<div class="recipe-wrapper">\n\t\t\t\t<div class="ingredients-block">\n\t\t\t\t\t<h3>Ingredients</h3>\n\t\t\t\t\t<ul>\n\t\t\t\t\t\t${l}\n\t\t\t\t\t</ul>\n\t\t\t\t\t<button class="add-recipe-to-list" type="button">Add <span class="green"></span> to Grocery List</button>\n\t\t\t\t</div>\n\t\t\t\t<div class="step-blocks">\n\t\t\t\t\t${u}\n\t\t\t\t</div>\n\t\t\t</div>`,c.html(i),o.text(e)}($(this).data("value"),t),$("#recipe-modal").modal("show")})),$("body").on("click",".ingredient",(function(){var t=$(this),e="true"===t.attr("data-addToList");t.attr("data-addToList",!e)})),$("body").on("click",".add-recipe-to-list",(function(){$(this).attr("disabled","disabled"),$(".ingredients-block .ingredient").each((function(){var t=$(this),e=t.data("value").toString(),i=t.data("quantity").toString();e&&i?firebase.database().ref("/lists/grocery/"+e).get().then(t=>{if(t.exists()){var a=t.val().quantity;firebase.database().ref("/lists/grocery/"+e).update({"/enabled":"true","/quantity":a+i})}else firebase.database().ref("/lists/grocery/"+e).set({"/enabled":"true","/quantity":i,"/synonyms":""})}).catch(t=>{alert(t)}):alert("Skipping item, because the name ["+e+"] or quantity ["+i+"] is empty")}))}))},{"./login":1,"./search":3}],3:[function(t,e,i){"use strict";function a(){var t=$(".search-field").val(),e=$(".tag-filters .tag-filter.active"),i=$(".list-item");t&&""!==t&&(i=i.filter(":icontains("+t+")")),e.each((function(){var t=$(this).data("value");i=i.filter((function(){return $(this).find(`.list-item-tag[data-value="${t}"]`).length>0}))})),$(".list-item").hide(),i.show()}var n={init:function(){$("body").on("click",".tag-filter",(function(){$(this).toggleClass("active"),a()})),$(".clear-all-filters").on("click",(function(){$(".tag-filters .tag-filter.active").removeClass("active"),$(".search-field").val(""),$(".list-item").show()})),$(".tag-filter-toggle").on("click",(function(){$(".tag-filters").slideToggle(),$(this).toggleClass("open")})),$(".search-field").on("input",(function(){a()})),$(".search-field").on("keydown",(function(t){13===(t.keyCode||t.which)&&$(".search-field").blur()}))},filterResults:a,generateTagFilterHTML:function(t){var e=[];if($(".tag-filters .tag-filter.active").each((function(){e.push($(this).data("value"))})),t){$(".tag-filters").empty();var i="";for(var a in t)i+=`<span class="tag-filter${e.includes(a)?" active":""}" data-value="${a}">${a}</span>`;$(".tag-filters").html(i)}}};e.exports=n},{}]},{},[2]);